# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

### Added by Zinit's installer
if [[ ! -f $HOME/.zinit/bin/zinit.zsh ]]; then
    print -P "%F{33}▓▒░ %F{220}Installing DHARMA Initiative Plugin Manager (zdharma/zinit)…%f"
    command mkdir -p "$HOME/.zinit" && command chmod g-rwX "$HOME/.zinit"
    command git clone https://github.com/zdharma/zinit "$HOME/.zinit/bin" && \
        print -P "%F{33}▓▒░ %F{34}Installation successful.%f" || \
        print -P "%F{160}▓▒░ The clone has failed.%f"
fi
source "$HOME/.zinit/bin/zinit.zsh"
autoload -Uz _zinit
(( ${+_comps} )) && _comps[zinit]=_zinit
### End of Zinit installer's chunk


#EXPORTS
# export PATH=$HOME/.gem/ruby/2.6.0/bin:$PATH
export PATH="$HOME/.rbenv/bin:$PATH"                                       # Ruby
export ZSH="$HOME/.oh-my-zsh"                                              # OMZ
export NVM_DIR="$HOME/.nvm"                                                # Nvm
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  --no-use                         # This loads nvm
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'  # FZF gitignore
export LANG=pt_BR.UTF-8 									                                 # Language
export UPDATE_ZSH_DAYS=1 												                           # Days to update
export DOTREPO="$HOME/dotfiles"

#THEME
ZSH_THEME="powerlevel10k/powerlevel10k"

#POWERLEVEL THEME SETTINGS
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(ssh context dir vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator time)
POWERLEVEL9K_SHOW_RULER=true

#PLUGINS
zinit ice depth=1;
zplugin light romkatv/powerlevel10k

zinit ice from"gh-r" as"command"
zinit load junegunn/fzf-bin

zplugin ice wait lucid atload'_zsh_autosuggest_start'
zplugin light zsh-users/zsh-autosuggestions

zplugin ice blockf; 
zplugin light zdharma/fast-syntax-highlighting

#HISTORY OPTS
HISTFILE=$HOME/.zsh_history
HISTSIZE=100000
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_SAVE_NO_DUPS
setopt HIST_REDUCE_BLANKS
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE
setopt SHARE_HISTORY
HISTIGNORE="&:ls:[bf]g:exit:reset:clear:cd:cd ..:cd..:zh"


#ALIASES
{%@@ if profile == "elementary" @@%}
alias aptup="sudo apt update && sudo apt upgrade"
alias aptclean="apt autoremove"
{%@@ elif profile == "mac" @@%}
alias macup="sudo softwareupdate -i -a"
alias hbup="brew update && brew upgrade && brew cask upgrade"
alias hbclean= "brew cleanup -n"
alias mempurge= "sudo purge"
{%@@ endif @@%}
alias jkc="bundle exec jekyll clean"
alias jks="bundle exec Jekyll serve"
alias jkh="bundle exec jekyll serve --host 0.0.0.0"
alias jkp="bundle exec jekyll build --profile"
alias jkd="bundle exec jekyll doctor"
alias bup="bundle update"
alias zinitup="zinit update"
alias omzup="upgrade_oh_my_zsh"
alias zshreload= "source ~/.zshrc"
alias dotdrop="$HOME/dotfiles/dotdrop.sh --cfg=$HOME/dotfiles/config.yaml"

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ -f ~/.p10k.zsh ]] && source ~/.p10k.zsh

source $ZSH/oh-my-zsh.sh

{%@@ if profile == "elementary" @@%}
if [ $TILIX_ID ] || [ $VTE_VERSION ]; then
        source /etc/profile.d/vte.sh
fi
{%@@ endif @@%}
